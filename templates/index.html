<!DOCTYPE html>
<html>
<head>
    <title>Medicine Reminder</title>
    <script>
        // JavaScript function to check for due reminders
        function checkReminders() {
            const reminders = JSON.parse('{{ reminders | tojson | safe }}');
            const now = new Date();
            const currentTime = now.toTimeString().slice(0,5); // "HH:MM"
            
            reminders.forEach(r => {
                if (r.time === currentTime) {
                    alert("‚è∞ Reminder: " + r.name);
                }
            });
        }

        // Check every 60 seconds
        setInterval(checkReminders, 60000);
    </script>
</head>
<body>
    <h1>Medicine Reminders</h1>
    <a href="{{ url_for('add_reminder') }}">Add Reminder</a>
    <br><br>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <p style="color: {% if category == 'success' %}green{% else %}red{% endif %};">
            {{ message }}
          </p>
        {% endfor %}
      {% endif %}
    {% endwith %}

    {% if reminders %}
    <table border="1" cellpadding="8">
        <tr>
            <th>Name</th>
            <th>Time</th>
            <th>Action</th>
        </tr>
        {% for r in reminders %}
        <tr>
            <td>{{ r.name }}</td>
            <td>{{ r.time }}</td>
            <td><a href="{{ url_for('delete_reminder', index=loop.index0) }}">Delete</a></td>
        </tr>
        {% endfor %}
    </table>
    {% else %}
    <p>No reminders added yet.</p>
    {% endif %}
</body>
</html>
